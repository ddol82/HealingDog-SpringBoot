<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.healing.healingdog.login.dao.UserMapper">

    <select id="selectByUserEmail" resultType="UserDTO">
        SELECT
            MEMBER_CODE
             ,  MEMBER_ID
             ,  MEMBER_NAME
             ,  MEMBER_PASSWORD
             ,  MEMBER_ROLE
             ,  MEMBER_EMAIL
        FROM TBL_MEMBER
        WHERE MEMBER_ID = #{memberId}
    </select>

    <select id="selectByEmail" resultType="UserDTO">
        SELECT
            user_code
             ,  name
             ,  email
             ,  user_password
             ,  phone
             ,  nickname
             ,  address
             ,  simple_intro
             ,  self_intro
             ,  blacklist
             ,  role
        FROM users
        WHERE email = #{email}
    </select>

    <select id="findByEmail" resultType="UserDTO">
        SELECT
            MEMBER_CODE
             ,  MEMBER_ID
             ,  MEMBER_NAME
             ,  MEMBER_PASSWORD
             ,  MEMBER_ROLE
             ,  MEMBER_EMAIL
        FROM TBL_MEMBER
        WHERE MEMBER_EMAIL = #{email}
    </select>

    <select id="findByUserEmail" resultType="UserDTO">
        SELECT
            user_code
             ,  name
             ,  email
             ,  user_password
             ,  phone
             ,  nickname
             ,  address
             ,  simple_intro
             ,  self_intro
             ,  blacklist
             ,  role
        FROM users
        WHERE email = #{email}
    </select>

    <select id="findByProviderEmail" resultType="ProviderDTO">
        SELECT
            provider_code
             ,  name
             ,  email
             ,  provider_password
             ,  phone
             ,  beauty_approval
             ,  petsitter_approval
             ,  trainers_approval
             ,  kindergarden_approval
             ,  boarding_approval
             ,  role
        FROM providers
        WHERE email = #{email}
    </select>

    <insert id="insertUser" parameterType="UserDTO">
        INSERT INTO TBL_MEMBER
        (
            MEMBER_CODE,
            MEMBER_ID,
            MEMBER_NAME,
            MEMBER_PASSWORD,
            MEMBER_EMAIL
        )
        VALUES
            (
                SEQ_MEMBER_CODE.NEXTVAL,
                #{memberId},
                #{memberName},
                #{memberPassword},
                #{memberEmail}
            )
    </insert>

</mapper>
